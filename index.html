<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>LIFF Starter</title>
        <link rel="stylesheet" href="style.css">
    </head>
        <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
        <script src="liff-starter.js"></script>
  <body>

<script>

liff
  .init({
    liffId: "1653945990-wym9pAjJ" // use own liffId
  })
  .then(() => {
    // Start to use liff's api
    liff.ready.then(() => {
  // do something you want when liff.init finishes
      const os = liff.getOS();
      const langage = liff.getLanguage();
      const versinon = liff.getVersion();
      const client = liff.isInClient();
      const loggedIn = liff.isLoggedIn();
      console.log(os)
      console.log(os)
      console.log(versinon)
      console.log(client)
      console.log(loggedIn)
      const idToken = JSON.stringify(liff.getDecodedIDToken());
      console.log(idToken)
      alert([os, langage, versinon, client, loggedIn, idToken])
      liff.sendMessages([
            {
              type:'text',
              text:'Hello, World!'
            }
          ])
          .then(() => {
            console.log('message sent');
          })
        .catch((err) => {
          console.log('error', err);
      });
        
      liff.openWindow({
        url: "https://line.me",
        external: true
      });
      
      
// login call, only when external browser is used

    if (liff.isLoggedIn()) {
        // set `redirectUri` to redirect the user to a URL other than the front page of your LIFF app.
        var accessToken = liff.getAccessToken();
        console.log(accessToken)
    } else {
        console.log("ログインしよう")
        liff.login();
    } 
    })
  })
  .catch((err) => {
    // Error happens during initialization
    console.log(err.code, err.message);
  });

// コールバックを使用する方法
//liff.init({ liffId: "1653945990-wym9pAjJ" }, successCallback, errorCallback);
        </script>
  </body>
</html>
